<!doctype html>
<html>
  <head>
    <title>M1.306 - Plataformas de publicación y distribución - Práctica - Ejercicio 1</title>
	<meta http-equiv=Content-Type content="text/html; charset=utf-8">
	<link rel="stylesheet" type="text/css" href="../css/practica.css">
  </head>
  <body>
	<div class="navbar">
		<img src="../img/logouoc.png"></img>
		<a href="../index.html">Inicio</a>
		<a class="selected" href="">Ejercicio 1</a>
		<a href="ejercicio2.html">Ejercicio 2</a>
		<a href="bibliografia.html">Bibliografía</a>
	</div>
    <div class="content">
		<h1>Ejercicio 1: Clip de vídeo incrustado en HTML 5</h1>
		
		<h2>Tarea 1.1: Codificación de los vídeos</h2>

		<h3>Vídeo original: Practica_H.265.mp4</h3>
		<video width="600" poster="../img/VideoPoster.jpg" controls>
			<source src="../video/Practica_H.265.mp4" type="video/mp4">
		</video>

		<p>Sus <strong>principales características</strong> son:</p>
		<ul>
			<li><strong>Codec vídeo:</strong> HEVC/H.265</li>
			<li><strong>Codec audio:</strong> AAC LC</li>
			<li><strong>Formato:</strong> MPEG-4</li>
			<li><strong>Resolución:</strong> 1920 x 1080</li>
			<li><strong>FPS:</strong> 60 fps</li>
			<li><strong>Tasa de bits:</strong> 19765 kbps</li>
			<li><strong>Estructura GOP:</strong> N = 60, M = 60. Dicha estructura no se ve en la información ofrecida por <i>Avidemux</i> o <i>MediaInfo</i>, 
				pero contando los fotogramas se ha observado que la estrucutra es fija, que hay un fotograma I cada 60 fotogramas y que el resto son fotogramas B, sin ninguna P.</li>
			<li><strong>Tamaño:</strong> 47,9 MB</li>
		</ul>

		<img width=320 src="../img/Practica_H.265_Info1.jpg">
		<img width=320 src="../img/Practica_H.265_Info2.jpg">
		<img width=320 src="../img/Practica_H.265_Info3.jpg">

		<h3>Codificación y resolución para la publicación del vídeo en Web</h3>

		<p>Partiendo de la información sobre los codes y su soporte por parte de los navegadores de 
			<a target="_blank" href="https://en.wikipedia.org/wiki/HTML_video#Browser_support">esta tabla</a>, las codificaciones elegidas inicialmente han sido AV1 y AVC/H.264.
			De todas formas, como <i>Avidemux</i> no permite la codificación en AV1 (<a target="_blank" href="https://www.videoconverterfactory.com/convert-video/avidemux-av1.html">Does Avidemux Add Support for AV1?</a>),
			finalmente se han <strong>elegido VP9</strong> (antecesor del AV1) <strong>y AVC/H.264</strong>.
		</p>
		<p>Las <strong>principales razones</strong>  para esta elección han sido:</p>
		<ul>
			<li>Entre las dos codificaciones se <strong>cubre el soporte en todos los navegadores principales</strong>, tal y como se puede observar en la tabla anteriormente mencionada.</li>
			<li>Ambas <strong>codificaciones están optimizadas</strong> y consigues compresiones y calidades muy buenas.</li>
			<li><strong>VP9</strong>, al igual que AV1, <strong>es abierto y sin patentes</strong>, y forma parte del formato WebM.</li>
			<li><strong>AVC/H.264</strong> es el <strong>más extendido</strong> y aunque se un códec propietario, los navegadores puede reproducirlos sin costes adicionales.</li>
		</ul>

		<p>La <strong>resolución seleccionada es 1080p (1920x1080)</strong>. Se trata de una resolución que equilibra de manera adecuada la calidad, el consumo de ancho de banda y el consumo de datos, 
			y es compatible con la mayoría de dispositivos.</p>
			
		<p>Es habitual que los servicios de streaming ofrezcan resoluciones más pequeñas (720p, 480p, 360p, etc.) para adaptarse dinámicamente a distintos dispositivos y situaciones de peor conexión.
			De esta forma, se prioriza que el usuario obtenga el contenido, aunque sea con menor calidad, en lugar de interrumpir la reproducción. De todas formas, para la ejecución 
			de esta práctica no se han tenido en cuenta.
		</p>

		<h3>Configuración en <i>Avidemux</i> para obtener los vídeos</h3>

		<p>A continuación, se detallan las <strong>principales configuraciones realizadas en <i>Avidemux</i></strong> para obtener los dos formatos de vídeos mencionados.</p>

		<p><strong>AVC/H.264</strong></p>

		<ul>
			<li><strong>Salida de video:</strong> Mpeg4 AVC (x264).</li>
			<li><strong>Salida de audio:</strong> El mismo que el original.</li>
			<li><strong>Formato de salida:</strong> MP4 Muxer.</li>
			<li><strong>Velocidad de frame:</strong> Filtro “Remuestrear los FPS” a 30 fps, reduce los fps a la mitad manteniendo la duración del vídeo.</li>
			<li><strong>Resolución:</strong> No se modifica, la original es 1080p.</li>
			<li><strong>Modo de codificación:</strong> Tasa de bits media (dos pasadas).</li>
			<li><strong>Tasa de bits media:</strong> 10.000 kbps, más o menos la mitad de la original. Según <a target="_blank" href="https://support.google.com/youtube/answer/2853702?hl=es-419">algunas fuentes</a>, suficiente para la resolución y fps definidos.</li>
		</ul>

		<img width=650 src="../img/Avidemux_H264_1.jpg">
		<img width=650 src="../img/Avidemux_H264_2.jpg">

		<ul><li><strong>Video generado:</strong> Practica_H.264.mp4</li></ul>
		<video width="600" poster="../img/VideoPoster.jpg" controls>
			<source src="../video/Practica_H.264.mp4" type="video/mp4">
		</video>

		<p>En estas imágenes de <strong><i>MediaInfo</i></strong> se puede observar que el <strong>resultado obtenido es el indicado</strong>. 
		Aunque la <strong>estructura GOP</strong> no aparece reflejada, en <i>Avidemux</i> se ha comprobado que es <strong>variable</strong> a lo largo del vídeo, y se han incluido también fotogramas P.</p>

		<img width=320 src="../img/Practica_H.264_Info1.jpg">
		<img width=320 src="../img/Practica_H.264_Info2.jpg">
		<img width=320 src="../img/Practica_H.264_Info3.jpg">

		<p><strong>VP9</strong></p>

		<ul>
			<li><strong>Salida de video:</strong> VP9 (libvpx).</li>
			<li><strong>Salida de audio:</strong> Opus Encoder, el encoding de audio soportado por WebM.</li>
			<li><strong>Formato de salida:</strong> WebM Muxer.</li>
			<li><strong>Velocidad de frame:</strong> Filtro “Remuestrear los FPS” a 30 fps, reduce los fps a la mitad manteniendo la duración del vídeo.</li>
			<li><strong>Resolución:</strong> No se modifica, la original es 1080p.</li>
			<li><strong>Modo de codificación:</strong> Tasa de bits media (dos pasadas).</li>
			<li><strong>Tasa de bits media:</strong> Al principio se ha dejado en 0 kbps para que el software lo ajuste a la calidad óptima, pero se ha obtenido un fichero de casi 41MB con 16.661 kbps. 
				Como 10.000 kbps es suficiente, se ha vuelto a generar con esta tasa de bits, obteniendo un vídeo de 18,5MB.</li>
		</ul>

		<img width=600 src="../img/Avidemux_VP1_1.jpg">

		<ul><li><strong>Video generado:</strong> Practica_VP9.webm</li></ul>
		<video width="600" poster="../img/VideoPoster.jpg" controls>
			<source src="../video/Practica_VP9.webm" type="video/webm">
		</video>

		<p>En estas imágenes de <strong><i>MediaInfo</i></strong> se puede observar que el <strong>resultado obtenido es el indicado</strong>. 
			Aunque la <strong>estructura GOP</strong> no aparece reflejada, en <i>Avidemux</i> se ha comprobado que es <strong>variable</strong> a lo largo del vídeo, y se han incluido también fotogramas P.</p>
	
		<img width=320 src="../img/Practica_VP9_Info1.jpg">
		<img width=320 src="../img/Practica_VP9_Info2.jpg">
		<img width=320 src="../img/Practica_VP9_Info3.jpg">

		<h2>Tarea 1.2: HTML5 vídeo</h2>

		<p>En el reproductor de debajo, mediante el tag "&lt;video&gt;" y varios "&lt;source&gt;", se han <strong>configurado ambos formatos</strong>, WebM y MP4. En función del dispositivo y navegador en el que se abra la web, 
			se <strong>seleccionará y reproducirá el primero que sea compatible</strong>.
		</p>

		<video width="600" poster="../img/VideoPoster.jpg" controls>
			<source src="../video/Practica_VP9.webm" type="video/webm">
			<source src="../video/Practica_H.264.mp4" type="video/mp4">
			El navegador no soporta los formatos de vídeo configurados.
		</video>

		<p>A continuación, se enumeran algunas de las <strong>características</strong> del vídeo de HTML5:</p>

		<ul>
			<li><strong>Sencillez:</strong> El tag "&lt;video&gt;" permite incrustar un reproductor de vídeo de manera muy sencilla y con poco esfuerzo.</li>
			<li><strong>Adaptabilidad y personalización: </strong> Mediante los múltiples opciones y atributos que ofrece es posible mostrar los controles del reproductor (play, pause, volumen, etc.), 
				incluir una imagen como poster (poster) o controlar su comportamiento (autoplay, muted). Además, mediante el uso de CSS, se puede personalizar su estilo.</li>
			<li><strong>Diferentes fuentes:</strong> Se pueden definir varios vídeos mediante tags "&lt;source&gt;" y en función del dispositivo y navegador en el que se abra la web, 
				se seleccionará y reproducirá el primero que sea compatible.</li>
			<li><strong>Pistas de texto cronometratas:</strong> Utilizando tags "&lt;track&gt;" se pueden definir pistas de texto cronométradas de distinto tipo de manera sencilla (subtítulos, captions, descripciones, titulos de capítulos, etc.)</li>
		</ul>

		<h2>Tarea 1.3: Publicación del vídeo mediante CDN</h2>

		<p>Como esta web con las soluciones de la práctica está publicada en el CDN de Amazon <strong>AWS Amplify</strong>, en el reproductor de la <strong>tarea 1.2</strong> se puede ver el <strong>vídeo publicado</strong>.</P>
		
		<p>La <strong>reproducción</strong> del vídeo, tanto en desktop con coenxión directa con cable, como en móvil con Wifi o 4G, es <strong>instantanea y sin interrupciones</strong>. 
		Se ha observado que la descarga del vídeo en móvil ha necesitado más tiempo, pero como se realiza en pequeñas partes y se guardan en el buffer, la demora en el inicio es despreciable y su reproducción no se interrumpe.</p>

		<p>La <strong>reproducción en móvil del vídeo original</strong> HEVC/H.265 de la tarea 1.1, en cambio, sí que <strong>se interrumpe</strong>, ya que es más pesada y necesita descargar más datos.</p>

		<p>Por lo tanto, considerando que la reducción de la calidad es prácticamente indetectable, y que la reproducción se realiza de manera fluida, se puede concluir que la <strong>elección de los codecs y formatos es válida</strong>.</p>

		<h2>Tarea 1.4: Funcionalidades de HTML5 vídeo</h2>
		<p><strong>TODO!!!!! Comprobar sutítulos tras publicar la web</strong></p>

		<video load="lazy" width="600" poster="../img/VideoPoster.jpg" controls muted autoplay>
			<source src="../video/Practica_VP9.webm" type="video/webm">
			<source src="../video/Practica_H.264.mp4" type="video/mp4">
			<track src="../text/MarlikSuge.vtt" kind="captions"></track>
			El navegador no soporta los formatos de vídeo configurados.
		</video>

		<p>En el vídeo de arriba se pueden observar algunas <strong>funcionalidades</strong> que ofrece el vídeo de HTML:</p>
		<ul>
			<li><strong>Poster:</strong> Se ha añadido una imagen como poster con la propiedad "poster". Con la reproducción automática es posible que no se vea, 
				pero tambiéns está configurado en el resto de reproductores del ejercicio.</li>
			<li><strong>Controles:</strong> Con el atributo booleano "controls" se muestran los controles (play/pause, volumen, pantalla completa, etc.).</li>
			<li><strong>Subtítulos:</strong> Se han añadido subtítulos con el tag "&lt;track&gt;".</li>
			<li><strong>Sin sonido:</strong> Con la propiedad "muted" se ha configurado la reproducción sin volumen.</li>
			<li><strong>Reproducción automática:</strong> Con la propiedad "autoplay" se ha activado la reproducción automática. Esta funcionalidad se activa siempre y cuando se use junto con la propiedad "muted".</li>
			<li><strong>Carga diferida:</strong> Aunque no es exclusiva del vídeo (ya que se puede configurar también para imágenes, iframes, etc.), se ha activado la carga diferida con la propiedad "load=lazy". 
				De esta forma, la carga del vídeo se retrasa hasta que el elemento "&lt;video&gt;" entra en el área visible del navegador, por lo que el vídeo no comienza a reproducirse 
				hasta que el usuario baje hasta él. Es una técnica utilizada para evitar descargar datos innecesarios.
			</li>
			<li><strong>Texto a mostrar cuando no es posible cargar el vídeo:</strong> se ha configurado el texto "El navegador no soporta los formatos de vídeo configurados." para los casos en los que no es posible reproducir el vídeo.</li>
		</ul>

		<h2>Tarea 1.5: Servicios adicionales de los CDN</h2>

    </div>
    <div class="footer">
		<div class="left">
			<span>M1.306 - Plataformas de publicación y distribución<br>Práctica</span>
		</div>
		<div class="right">
			<span>Gorriti Azkue, David<br>25/05/2025</span>
		</div>
    </div>
  </body>
</html>